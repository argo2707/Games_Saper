# Manual Testing / C
<a name="header1"></a>
## Содержание
 - [Описание работы](#описание-работы)
 - [Чек-лист](#чек-лист)
 - [Баг-репорт](#баг-репорт)
 - [Техническое задание](#техническое-задание)
 - [Структура разработанной программы](#структура-разработанной-программы)

## Описание работы
Был предоставлен код видеоигры Сапер на языке С, написанный студентами, обучающихся на курс старше. 

Задачи:
  * Создание чек-листа для ручной проверки исходного приложения
  * Исправление обнаруженных багов
  * Разработка и интеграция новой функциональности
  * Дополнение тестовой документации

## Чек-лист 
Чек-лист с фактическими результатами работы конечной программы представлен в документе [checklist_saper.xlsx](https://github.com/katenuit/Manual-Testing-C/files/11133627/checklist_saper.xlsx)

Логическая схема подключения кнопок приведена на следующем изображении:
![image](https://user-images.githubusercontent.com/99740986/229382381-648788ed-4aaa-4708-80ab-c3919efef5c2.png)

[*Back to top*](#header1)
## Баг-репорт
В ходе проверки исходного кода был обнаружен следующий баг. Так как в данной версии продукта был реализован единственный вариант расстановки бомб, в шагах воспроизведения указаны точные позиции ячеек, с которыми нужно взаимодействовать для обнаружения бага.

| Название поля | Определение |
| --- | --- |
| ID | 1 |
| Заголовок | При открытии ячейки со стоящим рядом флажком выводится неверное количество бомб |
| Шаги воспроизведения | 1. Запустить игру |
|| 2. Установить в пустой ячейке рядом с бомбой (на позиции (5;5)) флажок |
|| 3. Открыть ячейку ниже (6;5) |
| Ожидаемый результат | В ячейке (6;5) высвечивается цифра 3 |
| Фактический результат | В ячейке (6;5) высвечивается цифра 2 |
| Окружение | Version: 1 |
|| Микроконтроллер STM32F303VCT6 |
|| Дисплей с контроллером ILI9325 TFT LCD |
| Приоритет | high |

Также в рамках нефункционального тестирования "Тестирование удобства использования" было выявлено, что из-за установленного темно-зеленого цвета цифры 2, отражающей количество мин вокруг ячейки, значение плохо читается. Это мешает комфортной игре.

[*Back to top*](#header1)
## Техническое задание
После тестирования было составлено следующее ТЗ:
  1) Подсчёт количества мин на поле, которое будет находиться внизу справа от игрового поля
  2) Возможность выбора размера поля (10х10 или 5х5)
  3) Процент мин должен составлять 10 и 20 процентов от общего числа клеток соответственно для полей 10х10 и 5х5
  4) Исправленный вывод количества мин в радиусе одной ячейки
  5) Автоматическое раскрытие ячеек при раскрытии пустой ячейки
  6) Вывод результата игры: “Вы выиграли” в виде смайлика в очках или “Вы проиграли” в виде грустного смайлика
  7) Изменение зеленого цвета цифры «2» на более читаемый вариант
  
[*Back to top*](#header1)
## Структура разработанной программы
### Файлы Saper.h и Saper.c
В файлах находится основная логика программы, последовательный вызов функций для отрисовки игрового поля, функции для отслеживания состояний выигрыша и проигрыша. 

Описание основных созданных функций: 
```
void process_open_cells(int x, int y)
```
Функция, осуществляющая подсчет мин вокруг клетки с заданными координатами и отрисовку результата (Saper.c, строка 108)

```
void open_cell(void)
```
Функция, в которой происходит открытие клетки (Saper.c, строка 133)

```
void draw_mines(void);
```
Функция отрисовки всех мин на поле (Saper.c, строка 150)

```
void win(void);
```
Функция, которая отображает выигрыш игрока посредством заполнения экрана зеленым цветом, раскрытия расположения всех мин и вывода смайлика в очках (Saper.c, строка 160)

```
void loose(void);
```
Функция, заканчивающая игру (game_state = 0), стирающая курсор на клетке, отрисовывающая все мины на поле и грустный смайлик (Saper.c, строка 166)

```
void flag_cell(void)
```
Функция, установки флага на клетку. (Saper.c, строка 189)

```
void reset_arrs (void)
```
Функция, которая сбрасывает все массивы до исходного состояния: все ячейки закрыты, отметок о минах нет (Saper.c, строка 226)

```
void open_empt (int, int, int, int)
```
Функция, открывающая автоматически поле пустых ячеек при нажатии на одну из них. (Saper.c, строка 348)

### Файлы ArrayImages.h и ArrayImages.c 
Содержат функции для отрисовки клеток и выбора цветов в зависимости от полученного значения, которое находится в клетке с текущими координатами. Описание основных функций:
```
void draw_position(int x, int  y);
```
Функция отрисовки курсора в клетке с координатами (x,y) (ArrayImages.c, строка 44)

```
void draw_smile (int)
```
Функция, отрисовывающая смайлики внизу поля при выигрыше или проигрыше. (ArrayImages.c, строка 100)

```
void draw_count_mines (int)
```
Функция, которая определяет, какое количество мин нужно отобразить в нижнем правом углу дисплея (ArrayImages.c, строка 136)

```
void draw_num(int, int, int);
```
Функция, которая отрисовывает цифру на заданной координате. (ArrayImages.c, строка 156)

### Файлы main.h и main.c
Содержат в себе функции для запуска программы, инициализации клавиатуры и экрана

### Файл Constants.h
Содержит макросы для обработки нажатий клавиатуры и отрисовки игрового поля.

### Файлы lcd_ILI9325.c и lcd_ILI9325.h
Содержат макросы и функции для корректной работы дисплея.

###	Файлы keypad.c и keypad.h
Содержат функции и макросы для корректной обработки нажатий на клавиатуру.

### Файлы Tiles.c и Tiles.h
Содержат двумерные массивы для вывода изображений на экран. 
[*Back to top*](#header1)
